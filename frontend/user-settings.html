<!DOCTYPE html>

<html lang="en"> 
  

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="description" content="TechWave">
<meta name="author" content="Frenify">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link href="img/ayruvedi.png" rel="icon">
<link href="img/ayruvedi.png" rel="AyruvediCure">
<title>User Settings - AyruvediCure</title>


<script>
	if (!localStorage.frenify_skin) {
		localStorage.frenify_skin = 'light';
	}
	if (!localStorage.frenify_panel) {
		localStorage.frenify_panel = '';
	}
	document.documentElement.setAttribute("data-techwave-skin", localStorage.frenify_skin);
	if(localStorage.frenify_panel !== ''){
		document.documentElement.classList.add(localStorage.frenify_panel);
	}
  	
</script>

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com/">
<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@100;200;300;400;500;600;700;800;900&amp;family=Work+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel="stylesheet">
<!-- !Google Fonts -->

<!-- Styles -->
<link type="text/css" rel="stylesheet" href="css/plugins8a54.css?ver=1.0.0" />
<link type="text/css" rel="stylesheet" href="css/style8a54.css?ver=1.0.0" />
<!-- !Styles -->

</head>

<body>


<!-- Moving Submenu -->
<div class="techwave_fn_fixedsub">
	<ul></ul>
</div>
<!-- !Moving Submenu -->

<!-- Preloader -->
<div class="techwave_fn_preloader">
	<svg>
		<circle class="first_circle" cx="50%" cy="50%" r="110"></circle>
		<circle class="second_circle" cx="50%" cy="50%" r="110"></circle>
	</svg>
</div>
<!-- !Preloader -->


<!-- MAIN WRAPPER -->
<div class="techwave_fn_wrapper">
	<div class="techwave_fn_wrap">
	
	
		<!-- Searchbar -->
		<div class="techwave_fn_searchbar">
			<div class="search__bar">
				<input class="search__input" type="text" placeholder="Search here...">
				<img src="svg/search.svg" alt="" class="fn__svg search__icon">
				<a class="search__closer" href="#"><img src="svg/close.svg" alt="" class="fn__svg"></a>
			</div>
			<div class="search__results">
				<div class="results__title">Results</div>
				<div class="results__list">
					<ul>
						<li><a href="#">Artificial Intelligence</a></li>
						<li><a href="#">AI Doctor</a></li>
						<li><a href="#">Tradition of Ayurvedic Medicines</a></li>
						<li><a href="#">Why Ayurvedicure</a></li>
					</ul>
				</div>
			</div>
		</div>
		<!-- !Searchbar -->
		
		<!-- HEADER -->
		<header class="techwave_fn_header">
		
			<!-- Header left: token information -->
			<div class="header__left">
				<div class="fn__token_info">
					<span class="token_summary">
						<span class="count">120+</span>
						<span class="text">Happy People</span>
					</span>
					<a href="contact.html" class="token_upgrade techwave_fn_button"><span>Contact Us</span></a>
					
				</div>
			</div>
			<!-- /Header left: token information -->
			
			
			<!-- Header right: navigation bar -->
			<div class="header__right">
				<div class="fn__nav_bar">
					
					<!-- Search (bar item) -->
					<div class="bar__item bar__item_search">
						<a href="#" class="item_opener">
							<img src="svg/search.svg" alt="" class="fn__svg">
						</a>
						<div class="item_popup">
							<input type="text" placeholder="Search">
						</div>
					</div>
					<!-- !Search (bar item) -->
					
					<!-- Notification (bar item) -->
					<div class="bar__item bar__item_notification has_notification">
						<a href="#" class="item_opener">
							<img src="svg/bell.svg" alt="" class="fn__svg">
						</a>
						<div class="item_popup">
							<div class="ntfc_header">
								<h2 class="ntfc_title">Notifications</h2>
								<a href="#">So Far</a>
							</div>
							<div class="ntfc_list">
								<ul>
									<li>
										<p><a href="notification-single.html">Version 1.0.1 has been launched</a></p>
										<span>34 Min Ago</span>
									</li>
									<li>
										<p><a href="notification-single.html">New Message from Doctor</a></p>
										<span>1 day Ago</span>
									</li>
									<li>
										<p><a href="notification-single.html">Updated Presciption</a></p>
										<span>10 Jul</span>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<!-- !Notification (bar item) -->
					
					<!-- Full Screen (bar item) -->
					<div class="bar__item bar__item_fullscreen">
						<a href="#" class="item_opener">
							<img src="svg/fullscreen.svg" alt="" class="fn__svg f_screen">
							<img src="svg/smallscreen.svg" alt="" class="fn__svg s_screen">
						</a>
					</div>
					<!-- !Full Screen (bar item) -->
					
					<!-- Language (bar item) -->
					<div class="bar__item bar__item_language">
						<a href="#" class="item_opener">
							<img src="svg/language.svg" alt="" class="fn__svg">
						</a>
						<div class="item_popup">
							<ul>
								<li>
									<span class="active">English</span>
								</li>
								
							</ul>
						</div>
					</div>
					<!-- !Language (bar item) -->
					
					<!-- Site Skin (bar item) -->
					<div class="bar__item bar__item_skin">
						<a href="#" class="item_opener">
							<img src="svg/sun.svg" alt="" class="fn__svg light_mode">
							<img src="svg/moon.svg" alt="" class="fn__svg dark_mode">
						</a>
					</div>
					<!-- !Site Skin (bar item) -->
					
					<!-- User (bar item) -->
					<div class="bar__item bar__item_user">
						<a href="#" class="user_opener">
							<img src="img/user/user.png" alt="">
						</a>
						<div class="item_popup">
							<div class="user_profile">
								<div class="user_img">
									<img src="img/user/user.png" alt="">
								</div>
								<div class="user_info">
									<h2 class="user_name">John Cena<span>New</span></h2>
									<p><a href="mailto:johncena@gmail.com" class="user_email">johncena@gmail.com</a></p>
								</div>
							</div>
							<div class="user_nav">
								<ul>
									<li>
										<a href="user-profile.html">
											<span class="icon"><img src="svg/person.svg" alt="" class="fn__svg"></span>
											<span class="text">Profile</span>
										</a>
									</li>
									<li>
										<a href="user-settings.html">
											<span class="icon"><img src="svg/setting.svg" alt="" class="fn__svg"></span>
											<span class="text">Settings</span>
										</a>
									</li>
									
									<li>
										<a href="sign-in.html">
											<span class="icon"><img src="svg/logout.svg" alt="" class="fn__svg"></span>
											<span class="text">Log Out</span>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<!-- !User (bar item) -->
					
					
				</div>
			</div>
			<!-- !Header right: navigation bar -->
			
		</header>
		<!-- !HEADER -->
		
		
		<!-- LEFT PANEL -->
		<div class="techwave_fn_leftpanel">
			
			<div class="mobile_extra_closer"></div>
			
			<!-- logo (left panel) -->
			<div class="leftpanel_logo">
				<a href="index.html" class="fn_logo">
					<span class="full_logo">
						<img src="img/ayurvedicure-removebg-preview.png" alt="" class="desktop_logo">
						<img src="img/ayurvedicure-removebg-preview.png" alt="" class="retina_logo">
					</span>
					<span class="short_logo">
						<img src="img/ayruvedi.png" alt="" class="desktop_logo">
						<img src="img/ayruvedi.png" alt="" class="retina_logo">
					</span>
				</a>
				<a href="#" class="fn__closer fn__icon_button desktop_closer">
					<img src="svg/arrow.svg" alt="" class="fn__svg">
				</a>
				<a href="#" class="fn__closer fn__icon_button mobile_closer">
					<img src="svg/arrow.svg" alt="" class="fn__svg">
				</a>
			</div>
			<!-- !logo (left panel) -->
			
			<!-- content (left panel) -->
			<div class="leftpanel_content">
			
				<!-- #1 navigation group -->
				<div class="nav_group">
					<h2 class="group__title">Start Here</h2>
					<ul class="group__list">
						<li>
							<a href="user-login.html" class="fn__tooltip menu__item" data-position="right" title="Home">
								<span class="icon"><img src="svg/home.svg" alt="" class="fn__svg"></span>
								<span class="text">Home</span>
							</a>
						</li>
						
						<li>
							<a href="about-us.html" class="fn__tooltip menu__item" data-position="right" title="About Us">
								<span class="icon"><img src="svg/person.svg" alt="" class="fn__svg"></span>
								<span class="text">About Us</span>
							</a>
						</li>
						<li>
							<a href="blogs.html" class="fn__tooltip menu__item" data-position="right" title="Finetuned Models">
								<span class="icon"><img src="svg/cube.svg" alt="" class="fn__svg"></span>
								<span class="text">Blogs</span>
							</a>
						</li>
						
					</ul>
				</div>
				<!-- !#1 navigation group -->
			
				<!-- #2 navigation group -->
				<div class="nav_group">
					<h2 class="group__title">Consultation</h2>
					<ul class="group__list">
						<li>
							<a href="ai-chat-bot.html" class="fn__tooltip menu__item" data-position="right" title="AI Doctor">
								<span class="icon"><img src="svg/icons8-chatgpt.svg"  alt="" class="fn__svg"></span>
								<span class="text">AI Doctor</span>
							</a>
						</li>
						<li>
							<a href="human-doctor.html" class="fn__tooltip menu__item" data-position="right" title="Human Doctor">
								<span class="icon"><img src="svg/doctor-svgrepo-com.svg" alt="" class="fn__svg"></span>
								<span class="text">Human Doctor</span>
							</a>
						</li>
						<li>
							
							<a href="prakriti-analysis.html" class="fn__tooltip menu__item" data-position="right" title="Human Doctor">
								<span class="icon"><img src="svg/doctor-svgrepo-com.svg" alt="" class="fn__svg"></span>
								<span class="text">Prakriti Analysis</span>
							</a>
						</li>
					</ul>
				</div>
				<!-- !#2 navigation group -->
			
				<!-- #3 navigation group -->
				<div class="nav_group">
					<h2 class="group__title"></h2>
					<ul class="group__list">
						
						
						<li>
							<a href="sign-in.html" class="fn__tooltip menu__item" data-position="right" title="Log Out">
								<span class="icon"><img src="svg/logout.svg" alt="" class="fn__svg"></span>
								<span class="text">Log Out</span>
							</a>
						</li>
					</ul>
				</div>
				<!-- !#3 navigation group -->
				
				
			</div>
			<!-- !content (left panel) -->
			
		</div>
		<!-- !LEFT PANEL -->
		
		
		<!-- CONTENT -->
		<div class="techwave_fn_content">
		
			<!-- PAGE (all pages go inside this div) -->
			<div class="techwave_fn_page">
				
				<!-- User Settings Page -->
				<div class="techwave_fn_user_settings_page">
					<!-- Page Title -->
					<div class="techwave_fn_pagetitle">
						<h2 >Settings</h2>
					</div>
					<!-- !Page Title -->
				
					<div class="container small">
						<div class="techwave_fn_user_settings">
							<form>
								<div class="user__settings">
									<div class="settings_left">
									
										<!-- Upload Shortcode -->
										<label class="fn__upload">
											<span class="upload_content">
												<img src="svg/upload.svg" alt="" class="fn__svg">
												<span class="title">Drag & Drop a Image</span>
												<span class="fn__lined_text">
													<span class="line"></span>
													<span class="text">Or</span>
													<span class="line"></span>
												</span>
												<span class="title">Browse</span>
												<span class="desc">Supports JPG, JPEG, and PNG</span>
											</span>
											<span class="upload_preview">
												<a href="#" class="fn__closer fn__icon_button">
													<img src="svg/close.svg" alt="" class="fn__svg">
												</a>
												<img src="#" alt="" class="preview_img">
											</span>
											
											<input type="file" accept="image/*">
										</label>
										<!-- !Upload Shortcode -->
									
									</div>

									<div class="settings_right">
										<div class="item">
											<label class="input_label" for="name">Name</label>
											<div class="input_item">
												<input class="input" type="text" id="name" placeholder="Enter your name">
											</div>
										</div>
										<div class="item">
											<label class="input_label" for="email">Email Address</label>
											<div class="input_item">
												<input class="input" type="email" id="email" placeholder="Enter your email" readonly>
											</div>
										</div>
										<div class="item">
											<label class="input_label" for="phone">Phone Number</label>
											<div class="input_item">
												<input class="input" type="tel" id="phone" placeholder="Enter your phone">
											</div>
										</div>
										<div class="item">
											<label class="input_label" for="gender">Gender</label>
											<div class="input_item">
												<select class="input" id="gender">
													<option value="">Select Gender</option>
													<option value="Male">Male</option>
													<option value="Female">Female</option>
													<option value="Other">Other</option>
												</select>
											</div>
										</div>
										<div class="item">
											<label class="input_label" for="date-of-birth">Date of Birth</label>
											<div class="input_item">
												<input class="input" type="date" id="date-of-birth">
											</div>
										</div>
										<div class="item">
											<label class="input_label" for="locality">Locality</label>
											<div class="input_item">
												<input class="input" type="text" id="locality" placeholder="Enter your locality">
											</div>
										</div>
										<div class="item">
											<label class="input_label" for="pin-code">PIN Code</label>
											<div class="input_item">
												<input class="input" type="text" id="pin-code" placeholder="Enter your PIN code">
											</div>
										</div>
										<div class="item">
											<label class="fn__checkbox">
												<input type="checkbox" id="approve-changes">I approve all changes
												<span class="checkmark"></span>
												<img src="svg/check.svg" alt="" class="fn__svg">
											</label>
										</div>
										<div class="item">
											<button type="submit" class="techwave_fn_button" id="save-profile-btn">
												<span>Save Changes</span>
											</button>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
					
				</div>
				<!-- !User Settings Page -->
				
			</div>
			<!-- !PAGE (all pages go inside this div) -->
			
			
			
			
		</div>
		<!-- !CONTENT -->
		
		
	</div>
</div>
<!-- !MAIN WRAPPER -->



<!-- Scripts -->
<script type="text/javascript" src="js/jquery8a54.js?ver=1.0.0"></script>
<script type="text/javascript" src="js/plugins8a54.js?ver=1.0.0"></script>
<script type="text/javascript" src="js/init8a54.js?ver=1.0.0"></script>
<!-- !Scripts -->

<!-- Dynamic Settings Script -->
<script>
// Check authentication
const token = localStorage.getItem('authToken');
if (!token) {
	alert('Please login to access settings');
	window.location.href = 'sign-in.html';
}

// Fetch and populate user data
async function loadUserData() {
	try {
		const response = await fetch('/api/auth/profile', {
			method: 'GET',
			headers: {
				'Authorization': `Bearer ${token}`,
				'Content-Type': 'application/json'
			}
		});

		if (!response.ok) {
			if (response.status === 401) {
				localStorage.removeItem('authToken');
				localStorage.removeItem('userEmail');
				alert('Session expired. Please login again.');
				window.location.href = 'sign-in.html';
				return;
			}
			throw new Error('Failed to fetch profile');
		}

		const user = await response.json();
		
		// Populate form fields
		document.getElementById('name').value = user.name || '';
		document.getElementById('email').value = user.email || '';
		document.getElementById('phone').value = user.phone || '';
		document.getElementById('gender').value = user.gender || '';
		document.getElementById('date-of-birth').value = user.dateOfBirth || '';
		document.getElementById('locality').value = user.locality || '';
		document.getElementById('pin-code').value = user.pinCode || '';
		
		// Update header user info
		const userNameElements = document.querySelectorAll('.user_name');
		userNameElements.forEach(el => {
			el.innerHTML = `${user.name}<span>Active</span>`;
		});
		
		const userEmailElements = document.querySelectorAll('.user_email');
		userEmailElements.forEach(el => {
			el.textContent = user.email;
		});
		
	} catch (error) {
		console.error('Error loading user data:', error);
		alert('Failed to load user data. Please try again.');
	}
}

// Handle form submission
document.querySelector('form').addEventListener('submit', async function(e) {
	e.preventDefault();
	
	// Check if user approved changes
	if (!document.getElementById('approve-changes').checked) {
		alert('Please approve the changes before saving');
		return;
	}
	
	const profileData = {
		name: document.getElementById('name').value.trim(),
		phone: document.getElementById('phone').value.trim(),
		gender: document.getElementById('gender').value,
		dateOfBirth: document.getElementById('date-of-birth').value,
		locality: document.getElementById('locality').value.trim(),
		pinCode: document.getElementById('pin-code').value.trim()
	};
	
	if (!profileData.name) {
		alert('Name is required');
		return;
	}
	
	try {
		const response = await fetch('/api/auth/profile', {
			method: 'PUT',
			headers: {
				'Authorization': `Bearer ${token}`,
				'Content-Type': 'application/json'
			},
			body: JSON.stringify(profileData)
		});
		
		const data = await response.json();
		
		if (response.ok) {
			alert('Profile updated successfully!');
			// Reload to show updated data
			window.location.reload();
		} else {
			alert(data.message || 'Failed to update profile');
		}
	} catch (error) {
		console.error('Update error:', error);
		alert('An error occurred while updating profile. Please try again.');
	}
});

// Load user data on page load
document.addEventListener('DOMContentLoaded', loadUserData);

// Add logout functionality
document.addEventListener('DOMContentLoaded', function() {
	const logoutLinks = document.querySelectorAll('a[href="sign-in.html"]');
	logoutLinks.forEach(link => {
		link.addEventListener('click', function(e) {
			e.preventDefault();
			localStorage.removeItem('authToken');
			localStorage.removeItem('userEmail');
			alert('Logged out successfully!');
			window.location.href = 'sign-in.html';
		});
	});
});
</script>

</body>

</html>